(this["webpackJsonpStoryteller-client"]=this["webpackJsonpStoryteller-client"]||[]).push([[0],{52:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(25),i=n.n(s),r=(n(52),n(16)),o=n(45),l=n(2),u=n(3),j=n(5),d=n(4),h=(n(32),n(80)),p=n(81),b=n(84),m=n(82),O=n(83),x=n(14),f=n.n(x),v=(n(33),n(0));function g(e){return Object(h.a)().setView(e.center,e.zoom),null}var y=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={position:[11.267489,-74.191023]},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){this.props.lat&&this.props.lat!==this.state.position[0]&&this.setState({position:[this.props.lat,this.props.lon]})}},{key:"render",value:function(){var e=new f.a.Icon({iconUrl:"mapPin.png",iconSize:[33,43]}),t=this.state.position;return console.log(this.state.position),Object(v.jsx)("div",{id:"asd"+t[0],children:Object(v.jsxs)(p.a,{style:{width:"340px",height:"250px"},center:t,zoom:13,scrollWheelZoom:!1,children:[Object(v.jsx)(g,{center:t,zoom:13}),Object(v.jsx)(b.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(v.jsx)(m.a,{icon:e,position:t,children:Object(v.jsxs)(O.a,{children:["this is a cool popup ",Object(v.jsx)("br",{})," Easily customizable. //we can put a name of the user who made this popup and the location of the popup"]})})]})})}}]),n}(a.Component),w=n(8),N=n.n(w),k="https://story--keeper.herokuapp.com",S="http://api.positionstack.com/v1/forward?access_key=dd44dfea77b439fad7a76f83765bc8d5&query=",C=n(7),E=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={story:{},inputLocation:"Taganga",lat:11.267489,lon:-74.191023},e.handleChange=function(t){e.setState({inputLocation:t.target.value}),N.a.get("".concat(S).concat(t.target.value)).then((function(t){console.log(t.data.data[0]);var n=t.data.data[0];e.setState({lat:n.latitude,lon:n.longitude})})).catch((function(e){console.log("sth went wrong")}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props;t.stories;return t.user?Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-3",children:[Object(v.jsx)(y,{lon:this.state.lon,lat:this.state.lat,inputLocation:this.state.inputLocation}),Object(v.jsx)("br",{}),Object(v.jsxs)("form",{onSubmit:function(t){e.props.onAdd(t,e.state.lon,e.state.lat)},children:[Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("input",{className:"form-control line",onChange:this.handleChange,name:"location",value:this.state.inputLocation,type:"text",placeholder:"Tell where it is.."})}),Object(v.jsxs)("div",{class:"custom-file",children:[Object(v.jsx)("input",{name:"image",type:"file",className:"custom-file-input"}),Object(v.jsx)("label",{class:"custom-file-label",for:"customFile",children:"choose image"})]}),Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("input",{className:"form-control",name:"title",type:"text",placeholder:"Tell the title of your story.."})}),Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("textarea",{className:"form-control",id:"tellStory",name:"description",rows:"6",placeholder:"Tell your story...."})}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("input",{name:"btn-public",type:"checkbox",className:"btn-hide-show","data-type":"simple-switch"}),Object(v.jsx)("label",{className:"hide-show-label",children:"private"})]}),Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("button",{name:"btn-submit",type:"submit",className:"btn btn-outline-dark",children:"pin"})})]})]})})}):Object(v.jsx)(C.a,{to:"/login"})}}]),n}(a.Component),L=n(6),A=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Welcome backpackers"}),Object(v.jsx)("p",{children:'"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate'}),Object(v.jsx)("button",{className:"btn btn-outline-dark",children:Object(v.jsx)(L.b,{to:"/login",children:"Login"})}),Object(v.jsx)("button",{className:"btn btn-outline-dark",children:Object(v.jsx)(L.b,{to:"/signup",children:"Sign up"})})]})}}]),n}(a.Component),D=(n(77),function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-3",children:[Object(v.jsx)("h1",{children:"Welcome back"}),Object(v.jsxs)("form",{onSubmit:this.props.onAdd,children:[Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("input",{className:"form-control",name:"email",type:"email",placeholder:"Enter email"})}),Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("input",{className:"form-control",name:"password",type:"password",placeholder:"Enter password"})}),Object(v.jsx)("button",{className:"btn btn-outline-dark",type:"submit",children:"Login"})]})]})})})})}}]),n}(a.Component)),z=(n(78),{width:"100%",height:"90vh",backgroundImage:"url('/image/background_img.jpg')",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}),_=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{style:z,children:[Object(v.jsx)("h1",{children:"Hello"}),Object(v.jsxs)("form",{onSubmit:this.props.onAdd,children:[Object(v.jsx)("input",{name:"name",type:"text",placeholder:"Enter name"}),Object(v.jsx)("input",{name:"email",type:"email",placeholder:"Enter email"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Enter password"}),Object(v.jsx)("button",{className:"btn btn-outline-dark",type:"submit",children:"Signup"})]})]})}}]),n}(a.Component),I=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"nav-container-card",children:Object(v.jsx)(L.b,{to:"/allstories",children:"Logo"})})}}]),n}(a.Component),J=n(29),M=n(20),q=(a.Component,function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.stories;return e.user?Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-3",children:[Object(v.jsx)(U,{stories:t}),Object(v.jsx)("h1",{children:"all stories here"}),t.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsxs)(L.b,{to:"/allstories/".concat(e._id),children:[Object(v.jsx)("div",{},e._id),Object(v.jsx)("img",{src:e.image,alt:"story image",style:{width:"340px"}}),Object(v.jsx)("h4",{className:"title",children:e.title}),Object(v.jsx)("p",{className:"description",children:e.description}),Object(v.jsx)("p",{className:"creator",children:e.creator.email})]}),Object(v.jsx)("div",{className:"nav-container-card"}),Object(v.jsx)("div",{className:"nav-container-card",children:Object(v.jsx)(L.b,{to:"/placeReview",children:"place review"})})]})}))]})})})}):Object(v.jsx)(C.a,{to:"/login"})}}]),n}(a.Component));function T(e){return Object(h.a)().setView(e.center,e.zoom),null}var U=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={position:[44.7866,20.4489]},e}return Object(u.a)(n,[{key:"render",value:function(){var e=new f.a.Icon({iconUrl:"mapPin.png",iconSize:[33,43]}),t=this.state.position;return console.log(this.state.position),Object(v.jsx)("div",{id:"asd"+t[0],children:Object(v.jsxs)(p.a,{style:{width:"340px",height:"250px"},center:t,zoom:1,scrollWheelZoom:!1,children:[Object(v.jsx)(T,{center:t,zoom:1}),Object(v.jsx)(b.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.stories.map((function(t){return Object(v.jsx)(m.a,{icon:e,position:[t.location.lat,t.location.lon],children:Object(v.jsxs)(O.a,{children:["this is a cool popup ",Object(v.jsx)("br",{})," Easily customizable. //we can put a name of the user who made this popup and the location of the popup"]})})}))]})})}}]),n}(a.Component),R=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){console.log(this.props.stories);var e=this.props,t=e.stories;return e.user?Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"nav-container-card",children:Object(v.jsx)("button",{className:"btn btn-outline-dark",children:Object(v.jsx)(L.b,{to:"/edit",children:"edit profile"})})}),Object(v.jsx)(U,{stories:t}),t.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsxs)(L.b,{to:"/allstories/".concat(e._id),children:[Object(v.jsx)("div",{},e._id),Object(v.jsx)("img",{src:e.image,alt:"story image",style:{width:"340px"}}),Object(v.jsx)("h4",{className:"title",children:e.title}),Object(v.jsx)("p",{className:"description",children:e.description}),Object(v.jsx)("p",{className:"creator",children:e.creator.email})]}),Object(v.jsx)("div",{className:"nav-container-card"}),Object(v.jsx)("div",{className:"nav-container-card",children:Object(v.jsx)(L.b,{to:"/placeReview",children:"place review"})})]})})),Object(v.jsx)("button",{children:Object(v.jsx)(L.b,{to:"/create",children:"Create your story"})})]}):Object(v.jsx)(C.a,{to:"/login"})}}]),n}(a.Component),W=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[this.props.user?Object(v.jsx)("button",{className:"btn btn-outline-dark",onClick:this.props.handleLogout,children:"logout"}):null,this.props.user?Object(v.jsx)("button",{className:"btn btn-outline-dark",children:Object(v.jsx)(L.b,{to:"/user",children:"profile"})}):null]})}}]),n}(a.Component),F=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={story:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.storyId;N.a.get("".concat(k,"/api/allstories/").concat(t),{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({story:t.data})})).catch((function(e){console.log("Story fetch failed")}))}},{key:"render",value:function(){var e,t=this,n=this.state.story;return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col-sm-3",children:Object(v.jsxs)(J.a,{children:[Object(v.jsx)("img",{src:n.image,alt:"story image",style:{width:"340px"}}),Object(v.jsx)("h1",{className:"title",children:n.title}),Object(v.jsx)("p",{className:"description",children:n.description}),Object(v.jsx)("p",{className:"creator",children:null===(e=n.creator)||void 0===e?void 0:e.email}),Object(v.jsxs)("div",{className:"nav-container-story",children:[Object(v.jsx)("div",{className:"nav-story"}),n.isOwner?Object(v.jsx)("button",{onClick:function(){return t.props.handleDelete(n)},className:"btn btn-outline-dark",children:"delete"}):null,Object(v.jsx)("div",{className:"nav-story",children:Object(v.jsx)(L.b,{to:"/placeReview",children:"place review"})})]})]})})})})}}]),n}(a.Component),P=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={user:{}},e.handleNameChange=function(t){var n=t.target.value;console.log(n);var a=JSON.parse(JSON.stringify(e.state.user));a.name=n,e.setState({user:a})},e.handleEmailChange=function(t){var n=t.target.value,a=JSON.parse(JSON.stringify(e.state.user));a.email=n,e.setState({user:a})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat(k,"/api/user/").concat(this.props.user._id)).then((function(t){e.setState({user:t.data})})).catch((function(){console.log("Detail fetch failed")}))}},{key:"render",value:function(){var e=this,t=this.state.user;return t?Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{name:"name",onChange:this.handleNameChange,value:t.name,type:"text",placeholder:"Enter name"}),Object(v.jsx)("input",{name:"email",onChange:this.handleEmailChange,value:t.email,type:"email",placeholder:"Enter email"}),Object(v.jsx)("button",{onClick:function(){e.props.onEdit(t)},className:"btn btn-outline-dark",children:"Edit profile"})]}):Object(v.jsx)(C.a,{to:"/login"})}}]),n}(a.Component),V=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("h2",{children:" The page you are looking for does not exist. "})})}}]),n}(a.Component),Z=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={user:null,stories:[],story:{},fetching:!1},e.handleSignup=function(t){t.preventDefault();var n=t.target.name.value,a=t.target.email.value,c=t.target.password.value;N.a.post("".concat(k,"/api/signup"),{name:n,email:a,password:c},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/login")}))})).catch((function(e){console.log("Create failed",e)}))},e.handleLogin=function(t){t.preventDefault();var n=t.target.email.value,a=t.target.password.value;N.a.post("".concat(k,"/api/signin"),{email:n,password:a},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/allstories")}))})).catch((function(e){console.log("Create failed",e)}))},e.handleSubmit=function(t,n,a){t.preventDefault();var c={};c.lon=n,c.lat=a;var s=t.target.image.files[0],i=t.target.title.value,r=t.target.description.value,l=new FormData;l.append("imageUrl",s),N.a.post("".concat(k,"/api/upload"),l,{withCredentials:!0}).then((function(t){N.a.post("".concat(k,"/api/create"),{location:c,image:t.data.image,title:i,description:r,completed:!1},{withCredentials:!0}).then((function(t){e.setState({stories:[t.data].concat(Object(o.a)(e.state.stories))},(function(){e.props.history.push("/user")}))})).catch((function(e){console.log("Creating story failed",e)}))}))},e.handleLogout=function(){N.a.post("".concat(k,"/api/logout"),{},{withCredentials:!0}).then((function(){e.setState({user:null},(function(){e.props.history.push("/login")}))}))},e.handleEdit=function(t){N.a.patch("".concat(k,"/api/user/").concat(t._id),{name:t.name,email:t.email,password:t.password}).then((function(t){console.log(t.data),e.getAllStories(),e.setState({user:t.data},(function(){e.props.history.push("/user")}))})).catch((function(e){console.log("Edit failed",e)}))},e.handleDelete=function(t){N.a.delete("".concat(k,"/api/stories/").concat(t._id)).then((function(t){e.setState({stories:t.data},(function(){e.props.history.push("/user")}))})).catch((function(){}))},e.getAllStories=function(){N.a.get("".concat(k,"/api/allstories")).then((function(t){console.log(t.data),e.setState({stories:t.data})})).catch((function(){console.log("Fetching all stories failed")}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat(k,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({user:t.data,fetching:!0})})).catch((function(){console.log("sth wrong"),e.setState({fetching:!0})})),this.getAllStories()}},{key:"render",value:function(){var e=this,t=this.state,n=t.stories,a=t.user;this.state.review;return this.state.fetching?Object(v.jsxs)("div",{children:[Object(v.jsx)(I,{}),Object(v.jsxs)(C.d,{children:[Object(v.jsx)(C.b,{exact:!0,path:"/",render:function(){return Object(v.jsx)(A,{user:a})}}),Object(v.jsx)(C.b,{exact:!0,path:"/signup",render:function(){return Object(v.jsx)(_,{onAdd:e.handleSignup})}}),Object(v.jsx)(C.b,{exact:!0,path:"/login",render:function(){return Object(v.jsx)(D,{onAdd:e.handleLogin})}}),Object(v.jsx)(C.b,{path:"/create",render:function(){return Object(v.jsx)(E,{user:a,onAdd:e.handleSubmit})}}),Object(v.jsx)(C.b,{exact:!0,path:"/user",render:function(){return Object(v.jsx)(R,{stories:n,user:a})}}),Object(v.jsx)(C.b,{exact:!0,path:"/user/:singleStory",render:function(e){return Object(v.jsx)(R,{story:story,user:a})}}),Object(v.jsx)(C.b,{exact:!0,path:"/allstories/:storyId",render:function(t){return Object(v.jsx)(F,Object(r.a)(Object(r.a)({handleDelete:e.handleDelete},t),{},{stories:n,user:a}))}}),Object(v.jsx)(C.b,{exact:!0,path:"/allstories",render:function(){return Object(v.jsx)(q,{stories:n,user:a})}}),Object(v.jsx)(C.b,{exact:!0,path:"/edit",render:function(t){return Object(v.jsx)(P,Object(r.a)({user:a,onEdit:e.handleEdit},t))}}),Object(v.jsx)(C.b,{path:"",component:V})]}),Object(v.jsx)(W,{user:a,handleLogout:this.handleLogout})]}):Object(v.jsx)("p",{children:"Loading..."})}}]),n}(a.Component),B=Object(C.g)(Z);i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(L.a,{children:Object(v.jsx)(B,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.77655244.chunk.js.map